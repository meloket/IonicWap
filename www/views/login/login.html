<ion-view class="m-login" view-title="欢迎登录使用">

	<div id="app">
		<div class="page-content">
			<div class="list-wrappe">
				<div class="scroll-content" style="transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1); transition-duration: 0ms; transform: translate(0px, 0px) scale(1) translateZ(0px);">
					<div>
						<div class="login-reg-wrap">
							<div class="login-reg login-wrap">
								<a href="#" class="login-reg-close router-link-active" ng-click="byeapp();"></a>
								<div class="login-top">
									<div class="default-avatar">
										<img src="../../img/avatar.png">
									</div>
								</div>
								<div class="login-reg-con">
									<div>
										<div class="weui-cells vux-no-group-title">
											<div class="vux-x-input weui-cell login-account">
												<div class="weui-cell__hd"></div>
												<div class="weui-cell__bd weui-cell__primary">
													<input ng-model="loginData.username" name="username" type="text" required id="vux-x-input-rcv5r" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" type="text" placeholder="请输入您的账号" class="weui-input">
												</div>
											</div>
											<div class="vux-x-input weui-cell login-passport">
												<div class="weui-cell__hd">
													<em class="eyeOff"></em>
												</div>
												<div class="weui-cell__bd weui-cell__primary">
													<input ng-model="loginData.password" name="password" type="password" required id="vux-x-input-m5fd0" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" type="password" placeholder="请输入您的密码" class="weui-input">
												</div>
											</div>
										</div>
									</div>
									<div class="log-btn">
										<button type="button" class="weui-btn weui-btn_radius weui-btn_warn" ng-click="login()">立即登录</button>
										<div class="vux-flexbox vux-flex-row">
											<div class="vux-flexbox-item">
												<button type="button" class="weui-btn weui-btn_radius weui-btn_plain-warn"><i class="icon visitorplay"></i>游客试玩</button>
											</div>
											<div class="vux-flexbox-item vux-flexbox-item2">
												<button type="button" class="weui-btn weui-btn_radius weui-btn_plain-warn" onclick="scan()"><i class="icon registergo"></i>免费注册</button>
											</div>
										</div>
									</div>

									<p class="noti text-assertive padding-top" ng-show="msg">{{msg}}</p>

									<!-- <div class="autolog-box clearfix">
										<ul>
											<li><a href="#/server">忘记密码？</a></li>
											<li>
												<div class="vux-check-icon">
													<i class="weui-icon weui_icon_success weui-icon-success" style="display: none;"></i>
													<i class="weui-icon weui_icon_success_circle weui-icon-success-circle"></i>
													<i class="weui-icon weui_icon_circle weui-icon-circle" style="display: none;"></i>
													<span>自动登录</span>
												</div>
											</li>
											<li>
												<div class="vux-check-icon">
													<i class="weui-icon weui_icon_success weui-icon-success" style="display: none;"></i>
													<i class="weui-icon weui_icon_success_circle weui-icon-success-circle"></i>
													<i class="weui-icon weui_icon_circle weui-icon-circle" style="display: none;"></i>
													<span>记住密码</span>
												</div>
											</li>
										</ul>
									</div> -->
									<div class="login-bottom clearfix">
										<p class="vux-divider">客服联系方式</p>
										<ul>
											<li><img src="../../img/b_icon1.png"></li>
											<li><img src="../../img/b_icon2.png"></li>
											<li><img src="../../img/b_icon3.png"></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


<script>
	function scan()
	{
		cordova.plugins.barcodeScanner.scan(
			function (result) {
				if(!result.cancelled)
				{
					if(result.format == "QR_CODE")
					{
						// alert(result.text);
						var uname = result.text.split("username=")[1];
						if(uname){
							angular.element(document.getElementById('app')).scope().loginwithqr(uname);
						}else{
							alert("QR Code Error!");
						}
						
						// navigator.notification.prompt("Please enter name of data",  function(input){
						// 	var name = input.input1;
						// 	var value = result.text;

						// 	var data = localStorage.getItem("LocalData");
						// 	console.log(data);
						// 	data = JSON.parse(data);
						// 	data[data.length] = [name, value];

						// 	localStorage.setItem("LocalData", JSON.stringify(data));

						// 	alert("Done");
						// });
					}
				}
			},
			function (error) {
				alert("Scanning failed: " + error);
			}
		);
	}
</script>

	
</ion-view>